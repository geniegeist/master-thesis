\chapter{Valid Outcomes of Positive Support Size Five}

In this chapter, we prove that for all valid integral outcomes \( \mathbf w \) with \( |\mathrm{supp}^+(\mathbf w)| = 5 \) we have
\begin{align*}
    \mathrm{deg}(\mathbf w) \leq 7.
\end{align*}
Tools like the Invertibility Criterion, Hyperfield Criterion, and the Hexagon Criterion will be used to prove this result. We follow the same proof as Bik and Marigliano in \cite{bik2022classifying}.

\section{Case \( d = 8, \dots, 41 \)}

First, we show similar to Proposition \ref{prop:jdngkjrenj3nw} that no outcome of degree \( d = 8, \dots, 41 \) exists with \( |\mathrm{supp}^+(\mathbf w)| = 5 \).

\begin{proposition}
    Let $A = \{ \mathrm{diag}(i) \}_{i=0}^d \cup \{ \mathrm{row}(i)\}^d_{i=0} \cup \{ \mathrm{col}(i) \}^d_{i=0}$ for some degree \( d \in \mathbb{N} \). Let \( \mathbf{x} \in H^{V_d} \) be nonzero with \( \mathrm{supp}^-(\mathbf{x}) = \left\{ (0,0) \right\} \). Then, the number of solutions \( \lvert S_5(A) \rvert \) for \( d = 8, \dots, 41 \) is depicted in Table \ref{tab:solutions324324324}.
\end{proposition}

\begin{proof}
    We compute the set of \( S_5(A) \) for \( d = 8, \dots, 40 \), and \( 41 \) using the implementation of Algorithm \ref{alg:solve} which is included in the appendix TODO.
\end{proof}

\begin{proposition}\label{prop:uiwuwinca}
    No outcome of degree \( d = 8, \dots, 41 \) exists with \( |\mathrm{supp}^+(\mathbf w)| = 5 \).
\end{proposition}

\begin{proof}
    We use Algorithm \ref{alg:hyperfield_criterion:is_zero}. The result of this algorithm is that only the zero outcome is possible for all these cases except for the following eight:
    \begin{enumerate}
        \item \( \left\{ (4, 1), (5, 0), (1, 6), (0, 8), (3, 5) \right\} \),
        \item \( \left\{  (3, 0), (0, 4), (5, 1), (1, 7), (4, 4) \right\} \),
        \item \( \left\{  (3, 0), (0, 5), (5, 1), (1, 7), (4, 4) \right\} \),
        \item \( \left\{   (1, 1), (3, 0), (3, 4), (0, 8), (5, 3) \right\} \),
        \item \( \left\{   (3, 0), (0, 6), (5, 1), (1, 7), (4, 4) \right\} \),
        \item \( \left\{   (0, 3), (3, 0), (5, 1), (1, 7), (4, 4) \right\} \),
        \item \( \left\{  (1, 1), (4, 0), (3, 4), (0, 8), (5, 3) \right\} \),
        \item \( \left\{  (3, 1), (5, 0), (1, 6), (0, 8), (3, 5) \right\} \).
    \end{enumerate}
    Valid configurations that have one of these eight sets as positive support are of degree eight or less. 
    
    Finally, we apply Algorithm \ref{alg:hyperfield_criterion:is_zero_general} to these eight cases with \( E \coloneqq \left\{ 3,4,5,6,7,8 \right\} \). The result is that only the zero outcome is possible. This shows the claim.
\end{proof}

\section{Case \( d \geq 42 \)}

We have proven that no valid outcome of degree \( d = 8, \dots, 41 \) exists with \( |\mathrm{supp}^+(\mathbf w)| = 5 \). Next, we show that no valid outcome of degree \( d \geq 42 \) exists using contractions.

As in Proposition \ref{prop:jasndkjsnjsnkjs}, we compute the sets 
\begin{gather*}
    \Gamma^{\mathrm{even}} \cap \left\{ \mathbf{s} \in H^{\Xi} : \lvert \mathrm{supp}^+(\mathbf{s}) \rvert \leq 5 \right\} \text{ and }
    \Gamma^{\mathrm{odd}} \cap \left\{ \mathbf{s} \in H^{\Xi} : \lvert \mathrm{supp}^+(\mathbf{s}) \rvert \leq 5 \right\} 
\end{gather*}
using Algorithm \ref{alg:hyperfield_criterion:efficient}. The Proposition \ref{prop:jasndkjsnjsnkjs} has already shown that the sets 
\begin{align*}
    \Gamma^{\mathrm{even}} \cap \left\{ \mathbf{s} \in H^{\Xi} : \lvert \mathrm{supp}^+(\mathbf{s}) \rvert \leq 4 \right\} \text{ and }
    \Gamma^{\mathrm{odd}} \cap \left\{ \mathbf{s} \in H^{\Xi} : \lvert \mathrm{supp}^+(\mathbf{s}) \rvert \leq 4 \right\} 
\end{align*}
are empty. So, we just need to check the case \( \lvert \mathrm{supp}^+(\mathbf{s}) \rvert = 5 \).



\begin{definition}
    We define 
    \begin{gather*}
        \Gamma^{\mathrm{even}}_5 \coloneqq \Gamma^{\mathrm{even}} \cap \left\{ \mathbf{s} \in H^{\Xi} : \lvert \mathrm{supp}^+(\mathbf{s}) \rvert = 5 \right\}
        \text{ and }
        \Gamma^{\mathrm{odd}}_5 \coloneqq \Gamma^{\mathrm{odd}} \cap \left\{ \mathbf{s} \in H^{\Xi} : \lvert \mathrm{supp}^+(\mathbf{s}) \rvert = 5 \right\}.
    \end{gather*}
\end{definition}

\begin{proposition}
    The following holds:
    \begin{enumerate}
        \item We have \( \lvert \Gamma^{\mathrm{even}}_5 \rvert  = 1283\).
        \item We have \( \lvert \Gamma^{\mathrm{odd}}_5 \rvert  = 1265\).
    \end{enumerate}
\end{proposition}

\begin{proof}
    See APpendix TODO. \# KEYWORD:LAOL
\end{proof}

\begin{corollary}
    Let \( d\geq 42 \). Let \( \mathbf{w} \in \mathbb{Z}^{V_d} \) be a valid outcome of degree \( d \) with \( |\mathrm{supp}^+(\mathbf w)| = 5 \). Then, \( \mathrm{contr}_d(\mathrm{sign}(\mathbf{w})) \in \Gamma^{\mathrm{even}}_5 \cup \Gamma^{\mathrm{odd}}_5 \).
\end{corollary}

\begin{proof}
    This follows from Corollary \ref{cor:validwunfwufneuiw}.
\end{proof}

Let us pick some \( \mathbf{s} \in \Gamma^{\mathrm{even}}_5 \cup \Gamma^{\mathrm{odd}}_5 \). We want to show that any configuration \( \mathbf{w} \in \mathbb{Z}^{V_d} \) that maps to \( \mathbf{s} \) under \( \mathrm{contr}_d \circ \mathrm{sign} \) must be a zero outcome which is a contradiction. So, we need to check \( 1283 + 1265 = 2548 \) cases.
Some of these cases occur multiple times; when we exclude these, we have \( 2318 \) cases to check:
\begin{align*}
    \lvert \Gamma^{\mathrm{even}}_5 \cup \Gamma^{\mathrm{odd}}_5  \rvert = 2318.
\end{align*}

\begin{remark}
    If you compare this proof with the proof of Theorem \ref{thm:main-result-32432432432nkdnjkfd}, you will see that the number of cases in \( \Gamma^{\mathrm{even}} \cup \Gamma^{\mathrm{odd}} \) to check has increased from zero to \( 2318 \).
\end{remark}

We make the following simplication to the index set \( \Xi \).

\begin{definition}
    Define the index set
    \begin{align*}
        \Xi' \coloneqq \left\{ 0,1,2,3 \right\}^2 \sqcup \left\{ 0,1,2,3 \right\}^2 \sqcup \left\{ 0,1,2,3 \right\}^2 \sqcup \left\{ 0,1,2,3 \right\} \sqcup \left\{ 0,1,2,3 \right\} \sqcup \left\{ 0,1,2,3 \right\}.
    \end{align*}
    Let \( \mathbf{s} \in H^{\Xi} \) be weakly valid. We also define the map
    \begin{gather*}
        \chi: H^\Xi \to H^{\Xi'},\\ \mathbf{s} = (\mathbf{x}, \mathbf{y}, \mathbf{z}, \mathbf{b}, \mathbf{c}, \mathbf{d}, \mathbf{e}) \mapsto (\mathbf{x}, \mathbf{y}, \mathbf{z}, \mathbf{b}, \mathbf{c}, \underbracket{\mathbf{d} + \mathbf{e}}_{\coloneqq \mathbf{f}}).
    \end{gather*}
    The addition \( \mathbf{f} \coloneqq \mathbf{d} + \mathbf{e} \) is done component-wise.
\end{definition}

\begin{definition}
    We define \( \mathrm{contr}_d' \coloneqq \chi \circ \mathrm{contr}_d \).
\end{definition}

\begin{figure}
    \begin{align*}
        \begin{array}{cccccccccccccccccccc}
            y_{0,3} & & & & & & & & & & & & \\
            y_{0,2} & y_{1,3} & & & & & & & & & & & \\
            y_{0,1} & y_{1,2} & y_{2,3} & & & & & & & & & & \\
            y_{0,0} & y_{1,1} & y_{2,2} & y_{3,3} & & & & & & & & & \\
            c_0 & y_{1,0} & y_{2,1} & y_{3,2} & f_0 & & & & & & & & \\
            c_0 & c_1 & y_{2,0} & y_{3,1} & f_1 & f_0 & & & & & & & \\
            c_0 & c_1 & c_2 & y_{3,0} & f_2 & f_1 & f_0 & & & & & & \\
            c_0 & c_1 & c_2 & c_3 & f_3 & f_2 & f_1 & f_0 & & & & & \\
            c_0 & c_1 & c_2 & c_3 &  *  & f_3 & f_2 & f_1 & f_0 & & & & \\
            c_0 & c_1 & c_2 & c_3 &  *  & * & f_3 & f_2 & f_1 & f_0 & & & \\
            c_0 & c_1 & c_2 & c_3 &  *  & * & * & f_3 & f_2 & f_1 & f_0 & & \\
            c_0 & c_1 & c_2 & c_3 &  *  & * & * & * & f_3 & f_2 & f_1 & f_0 & \\
            c_0 & c_1 & c_2 & c_3 &  *  & * & * & * & * & f_3 & f_2 & f_1 & f_0 \\
            x_{0,3} & x_{1,3} & x_{2,3} & x_{3,3} & b_3 & b_3 & b_3 & b_3 & b_3 & b_3 & z_{0,3} & z_{1,3} & z_{2,3} & z_{3,3} \\
            x_{0,2} & x_{1,2} & x_{2,2} & x_{3,2} & b_2 & b_2 & b_2 & b_2 & b_2 & b_2 & b_2 & z_{0,2} & z_{1,2} & z_{2,2} & z_{3,2} \\
            x_{0,1} & x_{1,1} & x_{2,1} & x_{3,1} & b_1 & b_1 & b_1 & b_1 & b_1 & b_1 & b_1 & b_1 & z_{0,1} & z_{1,1} & z_{2,1} & z_{3,1} \\
            x_{0,0} & x_{1,0} & x_{2,0} & x_{3,0} & b_0 & b_0 & b_0 & b_0 & b_0 & b_0 & b_0 & b_0 & b_0 & z_{0,0} & z_{1,0} & z_{2,0} & z_{3,0}
        \end{array}
    \end{align*}  
    \caption{Visualization of \( \Xi' \).}
\end{figure}

\begin{definition}
    Define \( \Lambda \subset H^{\Xi'} \) to be the set 
    \begin{align*}
        \Lambda  \coloneqq \chi( \Gamma^{\mathrm{even}}_5 \cup \Gamma^{\mathrm{odd}}_5 ) = \left\{ \mathbf{s}' \in H^{\Xi'} \mid \mathbf{s}' = \chi(\mathbf{s}) \text{ for some \( \mathbf{s} \in  \Gamma^{\mathrm{even}}_5 \cup \Gamma^{\mathrm{odd}}_5 \)}\right\}.
    \end{align*}
\end{definition}

A simple computation of the set \( \Lambda \) shows that it has \( 2290 \) elements.

\begin{proposition}\label{prop:ieshwu4rhui3w}
    Let \( \mathbf{s}' \in \Lambda \). Then, \( \mathbf{s}' \) has positive support of size five or four.
\end{proposition}

\begin{proof}
    Let \( \mathbf{s} = (\mathbf{x}, \mathbf{y}, \mathbf{z}, \mathbf{b}, \mathbf{c}, \mathbf{d}, \mathbf{e}) \in  \Gamma^{\mathrm{even}}_5 \cup \Gamma^{\mathrm{odd}}_5 \). Since \( \mathbf{d}, \mathbf{e} \) are non-negative, we see from
    \begin{gather*}
        \chi: H^\Xi \to H^{\Xi'}, \mathbf{s} \mapsto \mathbf{s}' = (\mathbf{x}, \mathbf{y}, \mathbf{z}, \mathbf{b}, \mathbf{c}, \mathbf{d} + \mathbf{e})
    \end{gather*}
    that \( \mathbf{f} \in \left\{ 0,1 \right\} \) holds. Hence, \( \mathbf{s}' \) has positive support of size five or four.
\end{proof}

\section{Case \( d \geq 42\) Continued: \( \mathbf{s}' \in \Lambda\) with Positive Support Size Four}

\begin{corollary}
    From Proposition \ref{prop:ieshwu4rhui3w}, we see that \( \mathbf{s}' \in \Lambda \) has positive support size four if and only if \( \mathbf{s} = (\mathbf{x}, \mathbf{y}, \mathbf{z}, \mathbf{b}, \mathbf{c}, \mathbf{d}, \mathbf{e}) \) satisfies \( d_i = 1 \) and \( e_j = 1 \) for some \( i,j = 0, 1,2,3 \).
\end{corollary}

\begin{corollary}
    Let \( \mathbf{s} \in \Gamma^{\mathrm{even}}_5 \cup \Gamma^{\mathrm{odd}}_5 \). The element \( \mathbf{s} \) maps to some \( \mathbf{s}' \in \Lambda \) with positive support size four under \( \chi \) if and only if \( \mathrm{supp}(\mathbf{s}) = \left\{ x_{0,0}, x_{0,3}, x_{1,1}, x_{3,0}, d_0, e_0 \right\} \).
\end{corollary}

\begin{proof}
    This is easily verified by computer using Algorithm \ref{alg:iewjr83h8w9}. TODO TAG JAIKAJ.
\end{proof}

\begin{algorithm}
    \caption{Check Configurations for Positive Support}
    \label{alg:iewjr83h8w9}
    \begin{algorithmic}[1]
    \Ensure a subset \( X \subset \Gamma^{\mathrm{even}}_5 \cup \Gamma^{\mathrm{odd}}_5 \) consisting of configurations that map to \( \mathbf{s}' \in \Lambda \) with positive support size four under \( \chi \).
    \State $X \gets \texttt{list()}$
    \State $D \gets \{d_0, d_1, d_2, d_3\}$
    \State $E \gets \{e_0, e_1, e_2, e_3\}$
    \For{\( \mathbf{s} \in \Gamma^{\mathrm{even}}_5 \cup \Gamma^{\mathrm{odd}}_5 \)}
        \If{$\mathrm{supp}(\mathbf{s}) \cap D \neq \emptyset$ \textbf{and} $\mathrm{supp}(\mathbf{s}) \cap E \neq \emptyset$}
            \State \texttt{X.append(s)}
        \EndIf
    \EndFor
    \State \Return \( X \)
\end{algorithmic}
\end{algorithm}

We exclude this one case from the 2290 cases in \( \Lambda \) with the following proposition.

\begin{proposition}
    Let \( d \geq 42 \). Let \( \mathbf{w} \in \mathbb{Z}^{V_d} \) be a weakly valid outcome. Then, we have 
    \begin{align*}
        \mathrm{supp}^+(\mathrm{contr}_d(\mathrm{sign}(\mathbf{w}))) \neq \left\{ x_{0,3}, x_{1,1}, x_{3,0}, d_0, e_0 \right\} 
    \end{align*}
\end{proposition}

\begin{proof}
    Assume for the sake of contradiction that 
    \begin{align*}
        \mathrm{supp}^+(\mathrm{contr}_d(\mathrm{sign}(\mathbf{w}))) = \left\{ x_{0,3}, x_{1,1}, x_{3,0}, d_0, e_0 \right\}.
    \end{align*}
    Then, \( \mathbf{w} \) is an outcome with support 
    \begin{align*}
        \mathrm{supp}(\mathbf{w}) = \left\{ (0,0), (0,3), (1,1), (3,0), (i,d-i), (j, d-j) \right\}
    \end{align*}
    for some even \( i =4,6,8, \dots, d-4 \) and odd \( j = 5,7,9, \dots, d-4 \).

    Let \( \mathbf{u} \in \mathbb{Z}^{V_3} \) be the following outcome 
    \begin{verbatim}
        1
        .  .
        .  3  .
       -1  .  .  1
    \end{verbatim}
    It has support in \( \mathrm{supp}(\mathbf{u}) = \left\{ (0,0), (0,3), (1,1), (3,0) \right\}  \subset  \mathrm{supp}(\mathbf{w})\). Define the outcome \( \mathbf{v} \coloneqq \mathbf{w} +w_{0,0} \mathbf{u} \). Then, \( v_{0,0} = 0 \) and \( \mathbf{v} \neq \mathbf{0} \). However, if we apply the Invertibility Criterion with \( \lambda = \mathbf{1} \) on \( \mathbf{v} \), we see that \( \mathbf{v} \) is zero. This is a contradiction. Hence, \( \mathrm{supp}^+(\mathrm{contr}_d(\mathrm{sign}(\mathbf{w}))) \neq \left\{ x_{0,3}, x_{1,1}, x_{3,0}, d_0, e_0 \right\}  \).
\end{proof}

\section{Case \( d \geq 42\) Continued: \( \mathbf{s}' \in \Lambda\) with Positive Support Size Five}

It remains to show the other 2289 cases of \( \mathbf{s}' \in \Lambda \) with positive support size five. From now on, assume that \( \mathbf{s}' \in \Lambda \) has positive support size five. We will show that all these cases are invalid. For that we introduce \emph{relative coordinates} defined below to make use of the Invertibility Criterion.

\subsection{Relative Coordinates and the Invertibility Criterion}

\begin{definition}
    Let \( d \geq 42 \).
    Let \( M \) be a sentinel value with no further significance. We use it to encode integers from \( 4, \dots, d-7 \). Define the map 
    \begin{align*}
        \mathrm{relcoord}: \left\{ 0, \dots, d \right\} \to \left\{ 0,1,2,3,d-6,d-5,d-4,d-3,d-2,d-1,d,M \right\}, \\
        x \mapsto \begin{cases}
            x & \text{if } x \in \left\{ 0,1,2,3, d-6,d-5,d-4,d-3,d-2,d-1,d \right\}, \\
            M& \text{if } x \in \left\{ 4, \dots, d-7 \right\}.
        \end{cases}.
    \end{align*}
    Define the map \emph{relative set} as follows:
    \begin{align*}
        \mathrm{relset}: \mathbb{Z}^{V_d} &\to 2^{\left\{ 0, \dots, 3, M, d-6, \dots, d \right\} \times \left\{ 0, \dots, 3, M, d-6, \dots, d \right\}}, \\
        \mathbf{w} &\mapsto \left\{ (\mathrm{relcoord}(i), \mathrm{relcoord}(j)) \mid (i,j) \in \mathrm{supp}(\mathbf{w}) \right\}.
    \end{align*}
\end{definition}

\begin{proposition}\label{prop:iewjri3j3234212121112}
    Let \( d \geq 42 \). Let \( \mathbf{w} \in \mathbb{Z}^{V_d} \) be a valid outcome with positive support size five and degree \( d \). Write \( \mathrm{contr}_d'(\mathrm{sign}(\mathbf{w})) = (\mathbf{x},\mathbf{y},\mathbf{z},\mathbf{b},\mathbf{c},\mathbf{f} ) \). Let \( i,j = 0,1,2,3 \). Then, all of the following conditions hold:
    \begin{enumerate}
        \item \( (i,j) \in \mathrm{relset}(\mathbf{w}) \) if and only if \( x_{i,j} \neq 0 \);
        \item \( (i, d-3+j-i) \in \mathrm{relset}(\mathbf{w}) \) if and only if \( y_{i,j} \neq 0 \);
        \item \( (d-3+i-j,j) \in \mathrm{relset}(\mathbf{w}) \) if and only if \( z_{i,j} \neq 0 \);
        \item \( \mathrm{relset}(\mathbf{w}) \cap \left\{ (M,i), (d-6, i), \dots, (d-4-i, i) \right\} \neq \emptyset \) if and only if \( b_i \neq 0 \);
        \item \( \mathrm{relset}(\mathbf{w}) \cap \left\{ (i,M), (i, d-6), \dots, (i,d-4-i) \right\} \neq \emptyset \) if and only if \( c_i \neq 0 \);
        \item \( \mathrm{relset}(\mathbf{w}) \cap \left\{ (M, d-4-i), \dots, (M, d-6), (M,M), (d-6, M), \dots, (d-4-i, M) \right\} \neq \emptyset \) if and only if \( f_i \neq 0 \).
    \end{enumerate}
\end{proposition}

\begin{proof}
    Let \( \mathbf{w} \) be some valid outcome with \( x_{i,j} \neq 0 \). Then, \( w_{i,j} \neq 0 \) with \( i,j = 0, 1,2, 3 \). By definition of \( \mathrm{relcoord} \), \( i \mapsto i \) and \( j \mapsto j \). So \( (i,j) \in \mathrm{relset}(\mathbf{w}) \) since \( (i,j) \in \mathrm{supp}(\mathbf{w}) \).

    Assume \( y_{i,j} \neq 0 \). Then, \( w_{i, d-3+j-i} \neq 0 \). By definition of \( \mathrm{relcoord} \), \( i \mapsto i \) and \( d-3+j-i \mapsto d-3+j-i \). So \( (i,d-3+j-i) \in \mathrm{relset}(\mathbf{w}) \) since \( (i,d-3+j-i) \in \mathrm{supp}(\mathbf{w}) \). The case \( z_{i,j} \neq 0 \) is similar.

    Assume \( b_{i} \neq 0 \). Then, there must exist some nonzero \( w_{k, i} \) for some \( k = 4, \dots, d-4-i \). Clearly, \( k \) maps to some element in \( \left\{ M, d-6, \dots, d-4-i \right\} \). This shows the claim. The case for \( c_i \) is similar.

    Assume \( f_{i} \neq 0 \). Then, there must exist some nonzero \( w_{k, d-i-k} \) for some \( k = 4, \dots, d-4-i \). Clearly, \( k \) and \( d-i-k \)  map to some element in \( \left\{ M, d-6, \dots, d-4-i \right\} \). This shows the claim.
\end{proof}

\begin{remark}
    Given some \( \mathbf{s}' \in {H}^{\Xi'} \) we can compute all the relative supports \( \mathrm{relset}(\mathbf{w}) \) for all \( \mathbf{w} \in \mathbb{Z}^{V_d} \) with \( \mathrm{contr}_d'(\mathrm{sign}(\mathbf{w})) = \mathbf{s}'\). Proposition \ref{prop:iewjri3j3234212121112} gives us an easy way to compute this set of relative supports by interpreting all the six conditions 1., 2., 3., 4., 5., and 6. in Proposition \ref{prop:iewjri3j3234212121112} as constraints on the relative support of \( \mathbf{w} \). 


\begin{algorithm}
    \caption{Make relative constraints}
    \label{alg:make_rel_constraints}
    \begin{algorithmic}[1]
    \Require some nonzero coordinate \( t \in \left\{ x_{i,j}, y_{i,j}, z_{i,j}, b_i, c_i, f_i \right\} \) of $\mathbf{s}' = (\mathbf{x},\mathbf{y},\mathbf{z},\mathbf{b},\mathbf{c},\mathbf{f} ) \in H^{\Xi'}$
    \Ensure set of constraints on the relative support of \( \mathbf{w} \) that correspond to the nonzero coordinate \( t \) as in Proposition \ref{prop:iewjri3j3234212121112}.
    \Function{\texttt{make\_rel\_constraints}}{$t$}
    \If{$t = x_{i,j}$}
    \State \Return $[(i,j)]$
\EndIf
\If{$t = y_{i,j}$}
    \State \Return $[(i, d-3+j-i)]$
\EndIf
\If{$t = z_{i,j}$}
    \State \Return $[(d-3+i-j, j)]$
\EndIf
\If{$t = b_i$}
    \State \Return $\{(M,i), (d-6,i), \dots, (d-4-i,i)\}$
\EndIf
\If{$t = c_i$}
    \State \Return $\{(i,M), (i,d-6), \dots, (i,d-4-i)\}$
\EndIf
\If{$t = f_i$}
    \State \Return $\{(M, d-4-i), \dots, (M,d-6), (M,M), (d-6,M), \dots, (d-4-i,M)\}$
\EndIf    \EndFunction
    \end{algorithmic}
    \end{algorithm}
\end{remark}

Relative coordinates help us to apply the Invertibility Criterion. 

\begin{example}\label{ex:siuh438h89}
    Let \( d \geq 42 \). Let \( \mathbf{w} \in \mathbb{Z}^{V_d} \) be some valid configuration with support size six. Now, assume that the relative support set of \( \mathbf{w} \) is 
    \begin{align*}
        \mathrm{relset}(\mathbf{w}) = \left\{ (0,0), (0,d), (1,3), (M,2), (M, d-6), (d-5, M) \right\}.
    \end{align*}
    Let us visualize the configuration \( \mathbf{w} \). Can such a configuration exist?
    \begin{verbatim}
d     X
d-1   .   .
d-2   .   .   .
d-3   .   .   .   .
d-4   .   .   .   .   .
d-5   .   .   .   .   .   .
d-6   .   .   .   .   .   X   X
M     .   .   .   .   .   .   .   .
M     ........................................
M     ..........................................
M     ............................................
M     .   .   .   .   .   .   .   .   .   .   .   .   
M     .   .   .   .   .   .   .   .   .   .   .   .   .   X
M     .   .   .   .   .   .   .   .   .   .   .   .   .   X   .   
3     .   X   .   .   .   .   .   .   .   .   .   .   .   .   .   .
2     .   .   .   .   X   X   X   X   X   X   X   X   .   .   .   .   .     
1     .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .
0     X   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .

      0   1   2   3   M   M   M   M   M   M   M   M  d-6 d-5 d-4 d-3 d-2 d-1  d
    \end{verbatim}
    We see that 
    \begin{align*}
        \mathrm{supp}(\mathbf{w}) = \left\{ (0,0), (0,d), (1,3) \right\} \cup \left\{ (i,2), (j,d-6 ) \right\} \cup \left\{ (d-5,k ) \right\}.
    \end{align*}
    for \( i,j,k  = 4, \dots, d-7 \). When \( i = j \), we can apply the Invertibility Criterion (Proposition \ref{prop:impossible-support-2324223423123123} and Proposition \ref{prop:impossible-support-232423}) with \( \lambda = (3,1, \dots,1, 2, 1, \dots, 1) \) to see that \( \mathbf{w} = \mathbf{0} \), which is a contradiction. So assume \( i \neq j \). Then, we use \( \lambda = (3, 1, \dots, 1) \) to see that \( \mathbf{w} = \mathbf{0} \), which is a contradiction. Hence, \( \mathbf{w} \) cannot be an outcome.
\end{example}

Let us generalize this example to elements \(  \mathbf{s}' \in \Lambda \).

\begin{proposition}
    Let \( \mathbf{s}' \in \Lambda \) with positive support size five. Then, all of the following hold:
    \begin{enumerate}
        \item \( \lvert \mathrm{supp}^+(\mathbf{s}') \cap \left\{ b_0,b_1,b_2,b_3 \right\} \rvert \leq 1 \);
        \item \( \lvert \mathrm{supp}^+(\mathbf{s}') \cap \left\{ c_0,c_1,c_2,c_3 \right\} \rvert \leq 1 \);
        \item \( \lvert \mathrm{supp}^+(\mathbf{s}') \cap \left\{ f_0,f_1,f_2,f_3 \right\} \rvert \leq 1 \).
    \end{enumerate}
\end{proposition}

\begin{proof}
    This is verified by computer. Keyword TAG MUSIAS.
\end{proof}

\begin{corollary}
    Let \( \mathbf{s}' \in \Lambda \) with positive support size five. Then, we have
    \begin{align*}
        \lvert \left\{ (x,y) \in \mathrm{relset}(\mathbf{s}') : x = M \right\} \rvert \leq 2 \quad \text{and} \quad         \lvert \left\{ (x,y) \in \mathrm{relset}(\mathbf{s}') : y = M \right\} \rvert \leq 2.
    \end{align*}
\end{corollary}

\begin{proof}
    Follows immediately from the previous proposition.
\end{proof}

\begin{proposition}
    Let \( d\geq 42 \).
    Let \( \mathbf{w} \in \mathbb{Z}^{V_d} \) be a valid configuration with positive support size five and 
    \begin{align*}
        \lvert \left\{ (x,y) \in \mathrm{relset}(\mathbf{w}) : x = M \right\} \rvert = 2.
    \end{align*}
    Denote these elements by \( (M, x) \) and \( (M, y) \) for \( x \neq y \). Write \( (i,x), (i',y) \in \mathrm{supp}(\mathbf{w}) \) with \( i,i' = 4, \dots, d-7 \) for the elements that map to \( (M, x) \) or \( (M, y) \) under \( \mathrm{relcoord} \), respectively. If we successfully apply the Invertibility Criterion for the case \( i = i' \) to show the contradiction \( \mathbf{w} = \mathbf 0 \) with 
    \begin{align*}
        \lambda = (\mathbf{a},1,\dots,1, 2, 1, \dots, 1, \mathbf{b})
    \end{align*}
    for some \(\mathbf{a} \in \mathbb{Z}^{k}_{\geq 1}, \mathbf{b} \in \mathbb{Z}^{h}_{\geq 1} \), and \( 1 \leq k,h \leq 4 \), then we can also apply the Invertibility Criterion for the case \( i \neq i' \) with
    \begin{align*}
        \lambda' = (\mathbf{a},1, \dots, 1, \mathbf{b})
    \end{align*}
    to show the same contradiction.
\end{proposition}

\begin{proof}
    Assume \( i \neq i' \). Then, we can just apply Proposition \ref{prop:impossible-support-23233243243423} as long as \( S'_{l'} \in \left\{ 0, \lambda'_l \right\} \) is satisfied for all \( l' \), see Section \ref{subsec:divide} on the divide and conquer approach of the Invertibility Criterion. Theses conditions are satisfied because the sets \( S_l \) induced by \( \lambda \) satisfy \( S_{l} \in \left\{ 0, \lambda_l \right\} \) by assumption.
\end{proof}

\begin{corollary}
    The previous propostion allows us to specialize to the case \( i = i' \) when \( (i,x), (i',y) \in \mathrm{supp}(\mathbf{w}) \) for \( i,i' = 4, \dots, d-7 \) and \( x \neq y \) occurs. A similar statement holds for the case \( \lvert \left\{ (x,y) \in \mathrm{relset}(\mathbf{w}) : y = M \right\} \rvert = 2 \).
\end{corollary}

\begin{example}
    Returning to Example \ref{ex:siuh438h89}, we see that it suffices to consider the case \( i = j \). The case \( i \neq j \) then follows from the previous corollary.
\end{example}

\begin{corollary}
    Let \( d \geq 42 \).
    Let \( S = \left\{ (i,x), (i,y), (i+1,z) \right\} \subset V_d \). If \( \mathrm{relcoord}(x) \in \left\{ 0,1,2,3 \right\} \), \( \mathrm{relcoord}(y) \in \left\{ d-6, \dots, d \right\} \) and \( \mathrm{relcoord}(z) \neq M  \), then \( A^{(d)}_{E, S} \) is invertible.
\end{corollary}

\begin{proof}
    Use Proposition \ref{prop:impossible-support-2324223423123123}. We just need to make sure that \( x + y \neq 2z + 1 \). Assume \( x + y = 2z + 1 \). Then, \( z = \frac{x+y -1}{2} \). The smallest value for \( z \) is \( \frac{d-6-1}{2} = 17.5 \), and the largest value is \( \frac{d+3-1}{2} = 22 \) for \( d = 42 \). Hence, \( z \) does map to \( M \) under relative coordinates for all \( d = 42 \) and for \( d > 42 \) we well. By assumption,  \( \mathrm{relcoord}(z) \neq M  \). This is a contradiction, so \( x + y \neq 2z + 1 \) for all \( d \geq 42 \).
\end{proof}

The corollary above can be extended to several other cases which allows us to implement an algorithm to exclude certain cases of \( \mathbf{s}' \in \Lambda \). First, we need an algorithm for the division step.

\begin{algorithm}
\caption{Divide}
\label{alg:divide}
\begin{algorithmic}[1]
\Require \texttt{relset}: Support of a configuration in relative coordinates
\Ensure \( L \in \mathbb{Z}^{k} \) where \( L_i = \lvert S_i \rvert \) if a division \( (\lambda, (E_i)_{i=1}^k, (S_i)_{i=1}^k) \) is found; \texttt{None} otherwise

\State $M \gets 500$, $d \gets 1000$
\State $R \gets [0, 1, 2, 3, M, d-6, d-5, d-4, d-3, d-2, d-1, d]$ 

\State $L \gets \texttt{list()}$, $\texttt{col\_start} \gets 0$

\For{$\texttt{col\_end} \in \{0, \dots, |R|-1\}$}
    \State $\texttt{num\_cols} \gets \texttt{col\_end} - \texttt{col\_start} + 1$
    \State $\texttt{points\_in\_col} \gets \{p = (x,y) \in \texttt{relset} \mid x \in [R[\texttt{col\_start}], R[\texttt{col\_end}]]\}$
    \State $\texttt{num\_points} \gets |\texttt{points\_in\_col}|$

    \If{$(\texttt{num\_points} = 0) \lor (\texttt{num\_cols} = \texttt{num\_points}) \lor (R[\texttt{col\_end}] = M)$}
        \State $L.\texttt{append}(\texttt{num\_points})$
        \State $\texttt{col\_start} \gets \texttt{col\_end} + 1$
    \EndIf
\EndFor

\If{$\texttt{sum}(L) \neq 6$}
    \State \Return \texttt{None}
\EndIf

\State \Return $L$
\end{algorithmic}
\end{algorithm}

This division algorithm just implements the division rule to choose \( \lambda_i  \) minimal such that \( \lvert S_i \rvert \in \left\{ 0, \lambda_i \right\} \) as explained in Remark \ref{rem:ksldmfiewonowiniew}.

\begin{example}
    Here are some examples of the algorithm in action.
    \begin{enumerate}
        \item \( L=[3, 0, 2, 0, 0, 0, 0, 0, 0, 1]  \) for support \( [(0, 0), (0, 3), (1, d-1), (M, 1), (M, M), (d, 0)] \).
        \item \( L=[3, 0, 2, 0, 0, 0, 0, 0, 0, 1]  \) for support \( [(0, 0), (0, 3), (1, d-1), (M, 1), (M, d-6), (d, 0)] \).
        \item \( L=[3, 0, 0, 0, 2, 0, 0, 0, 1]  \) for support \( [(0, 0), (0, 3), (1, d-1), (d, 0), (d-5, 1), (d-5, M)] \).
    \end{enumerate}
\end{example}

\begin{proposition}
    Let \( d \geq 42 \). Let \( a,b  = 0, \dots, d \) with \( b \geq a \) Then, the following hold:
    \begin{enumerate}
        \item If \( b = 0, 1,2,3 \) or \( a = d-6, \dots, d \), then \( \mathrm{relcoord}( \frac{a + b - 1}{2}) \neq M \).
        \item Let \( b = 4, \dots, d-7 \).
        \begin{enumerate}
            \item If \( a = 0,1 \), then \( \mathrm{relcoord}( \frac{a + b - 1}{2}) \in \left\{ 2,3, M \right\} \).
            \item If \( a = 2,3 \), then \( \mathrm{relcoord}( \frac{a + b - 1}{2}) \in \left\{ 3, M \right\} \).
        \end{enumerate}
        \item Let \( a = 4, \dots, d-7 \).
        \begin{enumerate}
            \item If \( b = d-6, d-5 \), then \( \mathrm{relcoord}( \frac{a + b - 1}{2}) = M \).
            \item If \( b = d-4,d-3 \), then \( \mathrm{relcoord}( \frac{a + b - 1}{2}) \in \left\{ M, d-6 \right\} \).
            \item If \( b = d-2,d-1 \), then \( \mathrm{relcoord}( \frac{a + b - 1}{2}) \in \left\{ M, d-6,d-5 \right\} \).
            \item If \( b = d \), then \( \mathrm{relcoord}( \frac{a + b - 1}{2}) \in \left\{ M, d-6,d-5,d-4 \right\} \).
        \end{enumerate}
    \end{enumerate}
\end{proposition}

\begin{proof}
    Let \( d \geq 42 \).
    \begin{enumerate}
        \item Let \( a = b = 3 \). Then \( \frac{6 - 1 }{2} = 2.5 \). Thus, for all \( a \leq b \leq 3 \) we have \( \frac{a + b - 1 }{2} \leq 2.5 \), so \(\mathrm{relcoord}( \frac{a + b - 1 }{2})  \neq M \). Let \( a = b = d - 6 \). Then \( \frac{a + b -1}{2} > d - 7 \). Thus, for all \( d-6 \leq a \leq b \leq d \) we have \( \mathrm{relcoord}(\frac{a + b - 1 }{2}) \neq M \).
        \item Let \( b = 4, \dots, d-7 \).
        \begin{enumerate}
            \item For \( a = 0 \) and \( b  = 4 \) we obtain \( \frac{a + b -1}{2} > 1.5 \). So, \( \mathrm{relcoord}(\frac{a + b - 1}{2})  \notin \left\{ 0,1 \right\} \). For \( a = 1 \) and \( b  = d-7 \), we see that \( \frac{a + b -1}{2} = \frac{d-7}{2} \), which maps to \( M \) under relative coordinates for \( d \geq 42 \). So the midpoint maps to values between two and \( M \) under \( \mathrm{relcoord} \), i.e. \( \left\{ 2,3,M \right\} \). This shows the claim.
            \item The proof of case \( a = 2,3 \) is similar to the previous proof.
        \end{enumerate}
        \item Let \( a = 4, \dots, d-7 \).
        \begin{enumerate}
            \item Let \( b = d-6, d-5 \). Then, \( \frac{a + b - 1}{2} \geq \frac{d - 3}{2} \geq 19.5 \) for all \( d \geq 42 \). This maps to \( M \) under relative coordinates. Moreover,  \( \frac{a + b - 1}{2} \leq \frac{d - 7 + d - 5 - 1}{2} = \frac{2d - 13}{2} = d - 6.5 \). Thus, 
            \( \mathrm{relcoord}(\frac{a + b - 1}{2}) = M \).
            \item The proof of cases \( b = d-4, d-3, \dots, d \) are similar to the previous proof.
        \end{enumerate}
    \end{enumerate}
\end{proof}

This proposition gives Algorithm \ref{alg:midpoint} to compute the midpoint of two points in relative coordinates. Next, we define the order in relative coordinates:
\begin{align*}
    0 < 1 < 2 < 3 < M < d-6 < d-5 < d-4 < d-3 < d-2 < d-1 < d.
\end{align*}
The \texttt{succ} function is defined as the successor in this order, see Algorithm \ref{alg:succ}. We can now implement the conquer step of the divide and conquer approach of the Invertibility Criterion, see Algorithm \ref{alg:conquer}. This leads us to an implementation of the Invertibility Criterion for relative coordinates, see Algorithm \ref{alg:relcoord-inv-crit}.

\begin{algorithm}
\caption{Compute midpoint \( \frac{a + b -1}{2} \)}
\label{alg:midpoint}
\begin{algorithmic}[1]
\Require Constants: $\texttt{SENTINEL\_M} \gets 500$, $\texttt{SENTINEL\_D} \gets 1000$
\Function{\texttt{midpoint}}{$a, b$}
    \State $low, high \gets \min(a, b), \max(a, b)$
    \If{$low > \texttt{SENTINEL\_M}$ \textbf{or} $high < \texttt{SENTINEL\_M}$}
        \State \Return $\left\{ \frac{low + high - 1}{2} \right\}$
    \ElsIf{$high = \texttt{SENTINEL\_M}$}
        \If{$low \in \{0, 1\}$}
            \State \Return $\{2, 3, \texttt{SENTINEL\_M}\}$
        \ElsIf{$low \in \{2, 3\}$}
            \State \Return $\{3, \texttt{SENTINEL\_M}\}$
        \EndIf
    \ElsIf{$low = \texttt{SENTINEL\_M}$}
        \If{$high \in \{\texttt{SENTINEL\_D} - 6, \texttt{SENTINEL\_D} - 5\}$}
            \State \Return $\{\texttt{SENTINEL\_M}\}$
        \ElsIf{$high \in \{\texttt{SENTINEL\_D} - 4, \texttt{SENTINEL\_D} - 3\}$}
            \State \Return $\{\texttt{SENTINEL\_M}, \texttt{SENTINEL\_D} - 6\}$
        \ElsIf{$high \in \{\texttt{SENTINEL\_D} - 2, \texttt{SENTINEL\_D} - 1\}$}
            \State \Return $\{\texttt{SENTINEL\_M}, \texttt{SENTINEL\_D} - 6, \texttt{SENTINEL\_D} - 5\}$
        \ElsIf{$high = \texttt{SENTINEL\_D}$}
            \State \Return $\{\texttt{SENTINEL\_M}, \texttt{SENTINEL\_D} - 6, \texttt{SENTINEL\_D} - 5, \texttt{SENTINEL\_D} - 4\}$
        \EndIf
    \EndIf
    \State \Return $\{\texttt{SENTINEL\_M}\}$
\EndFunction
\end{algorithmic}
\end{algorithm}

\begin{algorithm}
\caption{Successor}
\label{alg:succ}
\begin{algorithmic}[1]
\Require Constants: $\texttt{SENTINEL\_M} \gets 500$, $\texttt{SENTINEL\_D} \gets 1000$
\Function{\texttt{succ}}{$x$}
\If{$x = 3$}
    \State \Return \texttt{SENTINEL\_M}
\ElsIf{$x = \texttt{SENTINEL\_M}$}
    \State \Return $\texttt{SENTINEL\_D} - 6$
\Else
    \State \Return $x + 1$
\EndIf
\EndFunction
\end{algorithmic}
\end{algorithm}

\begin{algorithm}
\caption{Conquer Algorithm}
\label{alg:conquer}
\begin{algorithmic}[1]
\Require support \texttt{relset} in relative coordinates
\Ensure \texttt{True} only if the Invertibility Criterion is successful; \texttt{False} if inconclusive
\Function{\texttt{conquer}}{$\texttt{relset}$}
    \State \texttt{relset} $\gets \texttt{relset.sort\_by\_column()}$
    \State $\texttt{length} \gets |\texttt{relset}|$
    \If{$\texttt{length} \leq 2$}
        \State \Return \texttt{True} \Comment{Proposition \ref{prop:impossible-support-23233243243423} and \ref{prop:impossible-support-232423}}
    \ElsIf{$\texttt{length} = 3$}
        \State $x, y, z \gets \texttt{relset}[0], \texttt{relset}[1], \texttt{relset}[2]$
        \State $\texttt{same\_column} \gets (\texttt{col}(x) = \texttt{col}(y) = \texttt{col}(z))$
        \If{$\texttt{same\_column}$} \Comment{Proposition \ref{prop:impossible-support-2}}
            \State \Return \texttt{True}
        \ElsIf{$\texttt{col}(x) = \texttt{col}(y)$ \textbf{and} $\texttt{succ}(\texttt{col}(x)) = \texttt{col}(z)$}
            \If{$\texttt{row}(z) \notin \texttt{midpoint}(\texttt{row}(x), \texttt{row}(y))$} \Comment{Proposition \ref{prop:impossible-support-2324223423123123}}
                \State \Return \texttt{True}
            \EndIf
        \EndIf
        \State \Return \texttt{False}
    \Else
        \State \Return \texttt{False}
    \EndIf
\EndFunction
\end{algorithmic}
\end{algorithm}

    
\begin{algorithm}
\caption{Invertibility Criterion for relative coordinates}
\label{alg:relcoord-inv-crit}
\begin{algorithmic}[1]
\Require support \texttt{relset} in relative coordinates
\Ensure \texttt{True} only if the Invertibility Criterion is successful; \texttt{False} if inconclusive
\Function{\texttt{invertibility\_criterion}}{$\texttt{relset}$}
    \State $L \gets \texttt{divide(relset)}$
    \State \Return $\texttt{all\_is\_true}(\texttt{[conquer(s) for s in make\_subrelset(relset, L)]})$ 
\EndFunction
\end{algorithmic}
\end{algorithm}

\begin{algorithm}
\caption{Make subrelset}
\label{alg:subrelset}
\begin{algorithmic}[1]
\Function{\texttt{make\_subrelset}}{$\texttt{relset}, L$}
    \State $\texttt{i} \gets 0$
    \For{$n \in \{l \in L \mid l > 0\}$}
        \State \textbf{yield} $\texttt{relset}[\texttt{i}:\texttt{i}+n]$
        \State $\texttt{i} \gets \texttt{i} + n$
    \EndFor
\EndFunction
\end{algorithmic}
\end{algorithm}

Let us apply the Invertibility Criterion for relative coordinates to all of the 2289 cases of \( \mathbf{s}' \in \Lambda \) with positive support size five. Let \( \mathbf{s}' \) be one of these cases. We need to compute the set 
\begin{align*}
    R(\mathbf{s}') \coloneqq \{ \mathrm{relset}(\mathbf{w}) \mid  \mathbf{w} \in \mathbb Z^{V_d} \text{ such that } \mathrm{contr}'(\mathrm{sign}(\mathbf{w})) = \mathbf{s}' \}.
\end{align*}
Here is a simple depth first search algorithm to compute \( R(\mathbf{s}') \) using Proposition \ref{prop:iewjri3j3234212121112}, see Algorithm \ref{alg:relsets}. Now, we can apply the Invertibility Criterion for relative coordinates to all of \( \mathbf{m} \in R(\mathbf{s}') \). If all of these applications to \( \mathbf{m} \in R(\mathbf{s}') \) are successful, then \( \mathbf{s}' \) is impossible. Otherwise, we cannot exclude \( \mathbf{s}' \) as a possible outcome. 

Of the 2289 cases of \( \mathbf{s}' \in \Lambda \) with positive support size five, we rule out 1182 cases by applying the Invertibility Criterion for relative coordinates using Algorithm \ref{alg:jwenkjdn2kj32}. The remaining 1107 cases are inconclusive. The details of the implementation can be found in the Appendix TODO.

\begin{algorithm}[H]
\caption{Find Relative Coordinates}
\label{alg:relsets}
\begin{algorithmic}[1]
\Require $\mathbf{s}' \in H^{\Xi}$
\Ensure $R(\mathbf{s}')$
\Function{\texttt{relsets}}{$\mathbf{s}'$}
    \State $\texttt{constraints} \gets \texttt{[make\_rel\_constraints(t) for t in s' if t != 0]}$
    \State $\texttt{accu} \gets \texttt{list()}$ 
    \State $\texttt{res} \gets \texttt{list()}$ 
    
    \Function{\texttt{dfs}}{$\texttt{i}$}
        \If{$\texttt{i} \geq |\texttt{constraints}|$}
            \State $\texttt{res.append(accu.copy())}$
            \State \Return
        \EndIf
        \For{$x \in \texttt{constraints}[\texttt{i}]$}
            \State $\texttt{accu.append}(x)$
            \State $\texttt{dfs}(\texttt{i} + 1)$
            \State $\texttt{accu.pop()}$
        \EndFor
    \EndFunction

    \State \texttt{dfs}(0)
    \State \Return \texttt{res}
\EndFunction
\end{algorithmic}
\end{algorithm}

\begin{proof}[Proof of correctness]
    Let \( \mathbf{s}' = (\mathbf{x}, \mathbf{y}, \mathbf{z}, \mathbf{b}, \mathbf{c}, \mathbf{f}) \).
    By Proposition \ref{prop:iewjri3j3234212121112}, \( \mathbf{m} \in R(\mathbf{s}') \) if and only if \( \mathbf{m} \cap C \neq \emptyset \) for all \( C \in \left\{ \texttt{make\_rel\_constraints(t)} \mid t \in \{x_{i,j}, y_{i,j}, z_{i,j}, b_i, c_i, f_i\}, t \neq 0 \right\} \).

    It just remains to show that \( \mathbf{m} \in \texttt{res} \) if and only if \( \mathbf{m} \) satisfies all of these constraints. First note that \( x \in \mathbf{m} \) if and only if \( x \in \mathrm{constraints[i]} \) for some \( i \) by line eleven. Since \( \mathbf{m} \in \texttt{res}  \) if and only if \( \mathbf{m} \) satisfies all constraints by line six, the algorithm is correct.
\end{proof}

\begin{algorithm}
\caption{Check Configurations Against Invertibility Criterion}
\label{alg:jwenkjdn2kj32}
\begin{algorithmic}[1]
\Require $\Lambda$
\Ensure $\texttt{left\_to\_check}$: supports not satisfying the Invertibility Criterion
\State $\texttt{left\_to\_check} \gets \texttt{list()}$ 
\For{each $\mathbf{s}' \in \Lambda$}
    \State $\texttt{res} \gets [\texttt{invertibility\_criterion}(R) \text{ for } R \in \texttt{relsets}(\mathbf{s}')]$
    \If{$\neg \texttt{all}(\texttt{res})$}
        \State $\texttt{left\_to\_check.append}(\mathbf{s}')$
    \EndIf
\EndFor
\State \Return $\texttt{left\_to\_check}$
\end{algorithmic}
\end{algorithm}

\subsection{Symmetry}

It remains to consider 1107 cases thanks to the Invertibility Criterion for relative coordinates. We can use symmetry to reduce the number of cases further. Let \( \mathbf{s}' \in \Lambda \) be one of the 1107 cases. We can apply the following symmetries to \( \mathbf{s}' \) similar to the symmetries in Section \ref{sec:symmetry}:
\begin{align*}
    (12) \cdot (\mathbf{x}, \mathbf{y}, \mathbf{z}, \mathbf{b}, \mathbf{c}, \mathbf{f}) &\coloneqq ((x_{j,i})_{i,j=0}^3, (y_{j,i})_{i,j=0}^3, (z_{j,i})_{i,j=0}^3, \mathbf{c}, \mathbf{b}, \mathbf{f}), \\
    (13) \cdot (\mathbf{x}, \mathbf{y}, \mathbf{z}, \mathbf{b}, \mathbf{c}, \mathbf{f}) &\coloneqq ((z_{3-i,j})_{i,j=0}^3, (y_{3-j,3-i})_{i,j=0}^3, (x_{3-i,j})_{i,j=0}^3, \mathbf{f}, \mathbf{c}, \mathbf{b}).
\end{align*}
Define the group \( S_3 \) generated by these two symmetries. For all weakly valid outcomes \( \mathbf{w} \in \mathbb{Z}^{V_d} \), the actions \( \sigma \in S_3 \) satisfy 
\begin{align*}
    \sigma \cdot \mathrm{contr}_d'(\mathrm{sign}(\mathbf{w})) = \mathrm{contr}_d'(\mathrm{sign}(\sigma \cdot \mathbf{w})).
\end{align*}
We can use this symmetry to reduce the number of cases to consider.

\begin{proposition}
    Let \( d \in \mathbb{N} \) and \( \mathbf{s}' \in H^{\Xi'} \). If there are no weakly valid outcomes \( \mathbf{w} \in \mathbb{Z}^{V_d} \) of degree \( d \) with \( \mathrm{contr}'_{d}(\mathrm{sign}(\mathbf{w})) = \sigma \mathbf{s}' \) for some \( \sigma \in S_3 \setminus \left\{ (1) \right\} \), then there are no weakly valid outcomes \( \mathbf{v} \in \mathbb{Z}^{V_d} \) of degree \( d \) with \( \mathrm{contr}'_{d}(\mathrm{sign}(\mathbf{v})) = \mathbf{s}' \).
\end{proposition}

\begin{proof}[Proof by Contraposition]
    Let \( \sigma \in S_3 \setminus \left\{ (1) \right\} \).
    Assume there is some valid outcome \( \mathbf{v} \in \mathbb{Z}^{V_d} \) of degree \( d \) such that \( \mathrm{contr}'_d(\mathrm{sign}(\mathbf{v})) = \mathbf{s}' \). Define \( \mathbf{w} \coloneqq \sigma \mathbf{v} \). Then, \( \mathrm{contr}_d'(\mathrm{sign}( \mathbf{w})) =  \sigma \cdot \mathrm{contr}_d'(\mathrm{sign}(\mathbf{v}))  = \sigma \mathbf{s}'\). Note that \( \mathbf{w} \) is weakly valid since the symmetry group \( S_3 \) preserves the weak validity of outcomes. This shows the claim.
\end{proof}

We take the 1107 cases of \( \mathbf{s}' \in \Lambda \), apply the symmetry \( (12) \) to each case and check if the Invertibility Criterion for relative coordinates is satisfied. The inconclusive cases are then checked with the symmetry \( (13) \). We find that 758 cases are impossible and 349 cases are inconclusive. A pseudo code implementation of this symmetry reduction is given in Algorithm \ref{alg:sjfnejksnfejwkkfw}. More details can be found in Appendix TODO.

Of the 349 configurations, we consider the equivalence relation $\sim$ defined by $w \sim v \iff w = (12) v \text{ or } w = (13)v$. We compute the equivalence classes of $\sim$, and see there are 179 equivalence classes. By Proposition \ref{prop:symmetry} amd \ref{prop:symmetry-2}, it suffices to consider one contracted configuration \( \mathbf{s}' \) from each of the 179 equivalence classes. 

\begin{algorithm}
\caption{Further Reduciton by Symmetry}
\label{alg:sjfnejksnfejwkkfw}
\begin{algorithmic}[1]
\Require 1107 inconclusive cases $\mathbf{s}' \in \Lambda$
\Ensure $\texttt{left\_to\_check}$: supports not satisfying the Invertibility Criterion
\State $\texttt{tmp} \gets \texttt{list()}, \texttt{left\_to\_check} \gets \texttt{list()}$ 
\For{each $\mathbf{s}' \in \left\{ (12)\mathbf{t}' : \mathbf{t}' \in \Lambda \right\}$}
    \State $\texttt{res} \gets [\texttt{invertibility\_criterion}(R) \text{ for } R \in \texttt{relsets}(\mathbf{s}')]$
    \If{$\neg \texttt{all}(\texttt{res})$}
        \State $\texttt{tmp.append}((21)\mathbf{s}')$
    \EndIf
\EndFor
\For{each $\mathbf{s}' \in \left\{ (13)\mathbf{t}' : \mathbf{t}' \in \texttt{tmp} \right\}$}
    \State $\texttt{res} \gets [\texttt{invertibility\_criterion}(R) \text{ for } R \in \texttt{relsets}(\mathbf{s}')]$
    \If{$\neg \texttt{all}(\texttt{res})$}
        \State $\texttt{left\_to\_check.append}((31)\mathbf{s}')$
    \EndIf
\EndFor
\State \Return $\texttt{left\_to\_check}$
\end{algorithmic}
\end{algorithm}

\subsection{Hexagon Criterion}

We have made significant progress in reducing the number of cases to consider. We are left with 179 cases of \( \mathbf{s}' \in \Lambda \) out of 2290 initial cases. It is now time to use our third and last tool from our toolbox, the Hexagon Criterion. 

Let \( d \geq 42 \). We apply the Hexagon Criterion (Proposition \ref{prop:hexagon-criterion231312}) with
\begin{align*}
    \ell_1 = \ell_2 = 7 \quad \text{and} \quad d' = 6.
\end{align*}
First, we check that the requirements of the Hexagon Criterion are met: \( d' + \ell_1 + \ell_2  = 20 \leq 42 = d \). Next, we need to find all contracted configurations from the 179 cases of \( \mathbf{s}' \in \Lambda \) whose support lies outside the hexagon spanned by \( d', \ell_1 \) and \( \ell_2 \), see Figure \ref{fig:hexagon}. 

\begin{proposition}
    Let \( d \geq 42 \).
    Let \( \mathbf{s}' \in H^{\Xi'} \) be some contracted configuration and \( \mathbf{w} \in \mathbb{Z}^{V_d} \) be some configuration with \( \mathrm{contr}'_d(\mathrm{sign}(\mathbf{w})) = \mathbf{s}' \). If \( \mathrm{supp}^+(\mathbf{s}') \cap \left\{ \mathbf{b}, \mathbf{c}, \mathbf{f} \right\} = \emptyset\), then \( \mathrm{supp}(\mathbf{w}) \) lies outside the hexagon spanned by \( d', \ell_1 \) and \( \ell_2 \).
\end{proposition}

\begin{proof}
    This follows immediately from the definition of the hexagon spanned by \( d', \ell_1 \) and \( \ell_2 \), and the definition of the map \( \mathrm{contr}'_d \).
\end{proof}

A simple computation shows that 166 cases out of the 179 cases satisfy the Proposition above (for details see Appendix TODO). By the Hexagon Criterion, valid outcomes \( \mathbf{w} \) with \( \mathrm{contr}'_d(\mathrm{sign}(\mathbf{w})) = \mathbf{s}' \) where \( \mathbf{s}' \) is one of these 166 cases have degree at most \( d' = 20 \). However, we already showed that there are no valid outcomes of degree \( \leq 41 \); we found a contradiction. Thus, it remains to check the thirteen cases where the Hexagon Criterion could not be applied.

Here are the thirteen cases of \( \mathbf{s}' \in \Lambda \) that remain:
\begin{enumerate}
    \item \( \left\{ y_{0,3}, z_{2,0}, z_{2,2}, z_{3,1}, c_1 \right\} \)
    \item \( \left\{ y_{0,3}, y_{1,2}, y_{2,1}, z_{3,0}, b_1 \right\} \)
    \item \( \left\{ y_{0,3}, y_{1,1}, y_{1,3}, z_{2,0}, b_1 \right\} \)
    \item \( \left\{ y_{0,3}, y_{1,3}, y_{2,2}, z_{2,0}, b_1 \right\} \)
    \item \( \left\{ x_{0,1}, x_{2,1}, y_{1,3}, z_{3,0}, d_1 \right\} \)
    \item \( \left\{ y_{0,3}, z_{1,0}, z_{2,2}, z_{3,1}, c_1 \right\} \)
    \item \( \left\{ y_{0,2}, y_{1,1}, y_{1,3}, z_{3,0}, b_1 \right\} \)
    \item \( \left\{ y_{0,3}, z_{2,2}, z_{3,0}, z_{3,1}, c_1 \right\} \)
    \item \( \left\{ y_{0,3}, z_{1,1}, z_{3,0}, z_{3,1}, c_1 \right\} \)
    \item \( \left\{ x_{0,3}, x_{1,1}, x_{3,0}, z_{3,3}, d_0 \right\} \)
    \item \( \left\{ x_{0,2}, x_{2,1}, y_{1,3}, z_{3,0}, d_1 \right\} \)
    \item \( \left\{ y_{0,3}, z_{3,0}, b_1, c_1, d_1 \right\} \)
    \item \( \left\{ x_{1,2}, x_{2,1}, y_{0,3}, z_{3,0}, d_1 \right\} \)
\end{enumerate}
Let \( d \geq 42 \). We can go through these cases one by one and apply the Hexagon Criterion.

\begin{example}\label{ex:324jjhsdbvuysduyg2yrguy23hriuwfiueonw}
    Consider the first case.
    
\begin{verbatim}
y03 z20 z22 z31 c1

*  
y  y  
y  y  y  
y  y  y  y  
c  y  y  y  d  
c  *  y  y  d  d  
c  *  c  y  d  d  d  
c  *  c  c  d  d  d  d  
c  *  c  c     d  d  d  d  
c  *  c  c        d  d  d  d  
c  *  c  c           d  d  d  d  
x  x  x  x  b  b  b  b  z  z  z  z  
x  x  x  x  b  b  b  b  b  z  z  *  z  
x  x  x  x  b  b  b  b  b  b  z  z  z  *  
*  x  x  x  b  b  b  b  b  b  b  z  z  *  z  
\end{verbatim}
To apply the Hexagon Criterion to some configuration \( \mathbf{w} \) with the support indicated as above, we need to know where the nonzero entry of \( \mathbf{w} \) in the \( c_1 \)-column is roughly located; here the \( c_1 \)-column denotes the entries \( w_{1,k} \) with \( k = 4, \dots, d - 1 - 4 \). There can only exist one nonzero entry in the \( c_1 \)-column since \( \mathbf{w} \) has positive support size five. Let us denote the nonzero entry in the \( c_1 \)-column by \( (a,b) \in V_d \) where \( a = 1 \). We differentiate between three cases:
\begin{enumerate}
    \item Let \( a + b \leq \mathrm{floor}(\frac{d}{3})\). Set \( \ell_1 = \ell_2 = d' =  \mathrm{floor}(\frac{d}{3}) \geq \frac{42}{3} = 14 \). We easily see that the other non-entries \( y_{0,3}, z_{2.0}, z_{2,2}, z_{3,1} \) lie outside the hexagon.
    \item Let \( b \geq \mathrm{floor}(\frac{d}{3})  \). Set \( d' = 6 \), \( \ell_2 = 7 \) and \( \ell_1 = d + 1 - \mathrm{floor}(\frac{d}{3}) \geq 43 - 14 = 29 \). We see that \( d' + \ell_1 + \ell_2 \leq d \) since \( d \geq 42 \). We easily see that the non-entries \( y_{0,3}, z_{2.0}, z_{2,2}, z_{3,1} \) lie outside the hexagon. It remains to check that \( (a,b) \) also lies outside the hexagon. We have \( d - \ell_1 = d - (d + 1) + \mathrm{floor}(\frac{d}{3}) =\mathrm{floor}(\frac{d}{3}) - 1 < \mathrm{floor}(\frac{d}{3}) \leq b \). Thus, \( (a,b) \) lies outside the hexagon.
\end{enumerate}
Both these cases show that we can apply the Hexagon Criterion; the criterion shows that the degree of \( \mathbf{w} \) is at most \( d' \leq \mathrm{floor}(\frac{d}{3}) \). However, we assume that \( \mathbf{w} \) is of degree \( d \), which is a contradiction since \( d' < d \). We rule out \( \left\{ y_{0,3}, z_{2,0}, z_{2,2}, z_{3,1}, c_1 \right\} \).
\end{example}

We generalize Example \ref{ex:324jjhsdbvuysduyg2yrguy23hriuwfiueonw} to apply the Hexagon Criterion to the remaining twelve cases. Unfortunately, there is one case \(  \left\{ y_{0,3}, z_{3,0}, b_1, c_1, d_1 \right\}\) which cannot be ruled out by the Hexagon Criterion. We need to consider this case separately; so let us ignore this case for now and consider the remaining eleven cases.

First, we observe that all the eleven cases satisfy 
\begin{align*}
    \lvert \mathrm{supp}^+(\mathbf{s}') \cap \left\{b_0, b_1, c_0, c_1, f_0, f_1 \right\} \rvert = 1 \quad \text{and} \quad \lvert \mathrm{supp}^+(\mathbf{s}') \cap \left\{b_2, c_2, f_2, b_3, c_3, f_3 \right\} \rvert = 0.
\end{align*}
Hence, for all valid outcomes \( \mathbf{w} \in \mathbb{Z}^{V_d} \) with \( \mathrm{contr}'_d(\mathrm{sign}(\mathbf{w})) = \mathbf{s}' \) there exists some vertex \( (a,b) \in V_d \) with \( a = 0,1 \) or \( b=0,1 \) or \( a + b \geq d-1 \) such that 
\begin{align*}
    \mathrm{supp}(\mathbf{w}) \setminus \left\{ (a,b) \right\} \subset V_6 \cup \left\{ (i,j) \in V_d \mid j > d - 7 \right\}  \cup \left\{ (i,j) \in V_d \mid i > d - 7 \right\}.
\end{align*}

\begin{proposition}\label{prop:nkjeai32huh3i2}
    One of the following statements holds:
\begin{enumerate}
    \item \( a + b \leq \mathrm{floor}(\frac{d}{3}) \),
    \item \( a \geq \mathrm{floor}(\frac{d}{3}) \), or 
    \item \( b \geq \mathrm{floor}(\frac{d}{3}) \).
\end{enumerate}
\end{proposition}

\begin{proof}
    We make a case distinction: 
\begin{itemize}
    \item Let \( a + b \leq \mathrm{floor}(\frac{d}{3}) \). Our claim holds.
    \item Let \( a = 0 \) with \( a + b > \mathrm{floor}(\frac{d}{3}) \). Then, \( b > \mathrm{floor}(\frac{d}{3}) \). Let \( a = 1 \) with \( a + b > \mathrm{floor}(\frac{d}{3}) \). Then, \( b \geq \mathrm{floor}(\frac{d}{3}) \). 
    \item Let \( b = 0 \) with \( a + b > \mathrm{floor}(\frac{d}{3}) \). Then, \( a > \mathrm{floor}(\frac{d}{3}) \). Let \( b = 1 \) with \( a + b > \mathrm{floor}(\frac{d}{3}) \). Then, \( a \geq \mathrm{floor}(\frac{d}{3}) \). 
    \item Let \( a + b \geq d-1  \). Since \( d-1 > 2 \mathrm{floor}(\frac{d}{3}) \), we have \( a > \mathrm{floor}(\frac{d}{3}) \) or \( b > \mathrm{floor}(\frac{d}{3}) \).
\end{itemize}
This proves the proposition.
\end{proof}

\begin{proposition}
    All the eleven cases are impossible.
\end{proposition}

\begin{proof}
    It is easy to see that all of the eleven cases either satisfy 1., 2., or 3. of Proposition \ref{prop:nkjeai32huh3i2}. When 1. holds, we let \( d' = \ell_1 = \ell_2 = \mathrm{floor}(\frac{d}{3}) \geq 14 > 6 \). When 2. holds, we choose \( d' = 6, \ell_1 = 7 \) and \( \ell_2 = d + 1 - \mathrm{floor}(\frac{d}{3}) \). Note that \( d' + \ell_1 + \ell_2 \leq 42 \) since \( d \geq 42 \). When 3. holds, we choose  \( d' = 6, \ell_2 = 7 \) and \( \ell_1 = d + 1 - \mathrm{floor}(\frac{d}{3}) \). 

    We apply the Hexagon Criterion with these choices of \( d', \ell_1 \) and \( \ell_2 \) to each of the eleven cases. We find that the degree of the valid outcomes \( \mathbf{w} \) is at most \( d' \). However, we assumed that the degree of the valid outcomes is \( d \), which is a contradiction. This shows that all of the eleven cases are impossible.
\end{proof}


\subsection*{The Final Case}

We are left with one case  \(  \left\{ y_{0,3}, z_{3,0}, b_1, c_1, d_1 \right\}\).

\begin{proposition}
    There is no weakly valid outcome \( \mathbf{w} \in \mathbb{Z}^{V_d} \) such that \( \mathrm{contr}'_d(\mathrm{sign}(\mathbf{w})) =  \left\{ x_{0,0}, y_{0,3}, z_{3,0}, b_1, c_1, d_1 \right\} \).
\end{proposition}

\begin{proof}[Proof by Contradiction]
    We assume that \( d \geq 42 \). Assume that a weakly valid outcome \( \mathbf{w} \in \mathbb{Z}^{V_d} \) with \( \mathrm{contr}'_d(\mathrm{sign}(\mathbf{w})) =  \left\{ x_{0,0}, y_{0,3}, z_{3,0}, b_1, c_1, d_1 \right\} \) exists. Then, the support of \( \mathbf{w} \) reads 
    \begin{align*}
        S = \left\{ (0,0), (d,0), (0,d), (i,1), (1,j), (k, d-1-k) \right\}
    \end{align*}
    for some integers \( i,j, k \). Let us define \( e \in \mathbb{Z} \) such that we can write \( d = 2e + 1 \). If \( j \neq e \), we use Proposition \ref{prop:impossible-support-2324223423123123} to show that such a \( \mathbf{w} \) cannot exist. So, we assume that \( j = e \). By symmetry \( (12) \in S_3 \) and \( (13) \in S_3 \), we conclude that \( i = e \) and \( k = e \). This shows that the support of \( \mathbf{w} \) reads
    \begin{align*}
        S &= \left\{ (0,0), (d,0), (0,d), (e,1), (1,e), (e, d-1-e) \right\} \\&= \left\{ (0,0), (d,0), (0,d), (e,1), (1,e), (e,e) \right\}.
    \end{align*}
    We apply the Invertibility Criterion with \( E \coloneqq \left\{ 0,1,3,e,d-1,d \right\}\) which leads to the following pairing matrix 
    \begin{align*}
        A^{(d)}_{E,S} = \begin{bmatrix}
            1 & 0 & 1 & 0 & 0 & 0 \\
            d & 0 & 0 & 0 & 1 & 0 \\
            \binom{d}{3} & 0 & 0 & 0 & \binom{e}{2} & 0 \\
            \binom{d}{e} & 0 & 0 & 1 & e & 1 \\
            d & 0 & 0 & 1 & 0 & 0 \\
            1 & 1 & 0 & 0 & 0 & 0
        \end{bmatrix}.
    \end{align*}
    This pairing matrix has determinant \( \frac{(2e + 1)(e + 1)e}{6} \neq 0 \). Thus, \( S \) cannot be the support of a valid nonzero outcome.
\end{proof}

With the last case excluded, we proved that for all valid integral outcomes \( \mathbf w \) with \( |\mathrm{supp}^+(\mathbf w)| = 5 \) we have
\begin{align*}
    \mathrm{deg}(\mathbf w) \leq 7.
\end{align*}